# SYSTEM ARCHITECTURE DIAGRAM

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    VEDIC ASTROLOGY SYSTEM - ARCHITECTURE                   │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────┐
│   INPUT LAYER        │
├──────────────────────┤
│  • Kivy UI           │
│  • API Endpoints     │
│  • File I/O          │
│  • Database          │
└──────────────────────┘
         ↓
┌──────────────────────────────────────────────────────────────────────┐
│                     DATA LAYER (ChartData)                           │
├──────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌──────────────────────┐  ┌─────────────────┐ │
│  │  Birth Details  │  │  Planet Positions    │  │  Nakshatra Data │ │
│  │  Date/Time/Loc  │  │  Sign/House/Dignity  │  │  Yoni/Gana/Nadi │ │
│  └─────────────────┘  └──────────────────────┘  └─────────────────┘ │
└──────────────────────────────────────────────────────────────────────┘
         ↓
┌──────────────────────────────────────────────────────────────────────┐
│              RULES ENGINE (AstrologyRulesEngine)                     │
├──────────────────────────────────────────────────────────────────────┤
│  • Planet rulerships      • Exaltation tables     • Aspect rules     │
│  • Own house dignities    • Debilitation tables   • Friendship matrix│
│  • Benefic/Malefic nature • House significations  • Yoni compat      │
└──────────────────────────────────────────────────────────────────────┘
         ↓
┌──────────────────────────────────────────────────────────────────────┐
│                    ANALYSIS LAYER (Multiple Analyzers)              │
├──────────────────────┬──────────────────┬──────────────┬────────────┤
│ MarriageAnalyzer     │ NadiAnalyzer     │ SynastryA    │ DivisionalA│
├──────────────────────┼──────────────────┼──────────────┼────────────┤
│ • Promise            │ • Spouse Name    │ • Varna Kuta │ • D1-D60   │
│ • Timing/Delays      │ • Nadi Theme     │ • Vashya K   │ • Integration│
│ • Multiple Yoga      │ • Syllables      │ • Yoni Kuta  │ • Linking   │
│ • Mangal Dosha       │ • Divine Theme   │ • Other Kuta │ • Strength  │
│ • Separation Yoga    │                  │ • Total Score│            │
└──────────────────────┴──────────────────┴──────────────┴────────────┘
         ↓
┌──────────────────────────────────────────────────────────────────────┐
│                    REPORT GENERATION (ReportGenerator)               │
├──────────────────────────────────────────────────────────────────────┤
│  • Individual Chart Reports        • Synastry Reports                │
│  • Detailed Analysis Text          • Compatibility Percentages       │
│  • Recommendations                 • Remedial Suggestions            │
└──────────────────────────────────────────────────────────────────────┘
         ↓
┌──────────────────────┐
│  OUTPUT LAYER        │
├──────────────────────┤
│  • UI Display        │
│  • PDF Reports       │
│  • JSON Export       │
│  • Text Files        │
│  • Database Storage  │
└──────────────────────┘


DATA FLOW EXAMPLE:

Input: Raw Birth Data (Date, Time, Location)
    ↓
Parse → ChartData Object
    ↓
Calculate → Planet positions & sign placements
    ↓
AstrologyRulesEngine → Look up dignities, friendships, aspects
    ↓
MarriageAnalyzer → Check promise, delays, yogas
    ↓
NadiMarriageAnalyzer → Derive spouse name seeds
    ↓
SynastryAnalyzer → Calculate compatibility (if two charts)
    ↓
ReportGenerator → Format results
    ↓
Output → Display/Save results


MODULARITY:

All components can be:
  ✓ Used independently
  ✓ Extended with new rules
  ✓ Integrated into other systems
  ✓ Tested in isolation
  ✓ Scaled for performance

Example: Use only NadiMarriageAnalyzer without full system
```

---

## CLASS INHERITANCE & RELATIONSHIPS

```
VedicAstrologySystem (Main Orchestrator)
  │
  ├── AstrologyRulesEngine (Singleton-like)
  │   ├── Planet enums
  │   ├── Sign enums
  │   ├── Nakshatra enums
  │   ├── Static rule methods
  │   └── Knowledge tables
  │
  ├── MarriageAnalyzer
  │   └── Depends on: AstrologyRulesEngine, ChartData
  │
  ├── NadiMarriageAnalyzer
  │   └── Depends on: AstrologyRulesEngine, ChartData
  │
  ├── SynastryAnalyzer
  │   ├── Depends on: AstrologyRulesEngine, ChartData (×2)
  │   └── Produces: CompatibilityResult
  │
  └── ReportGenerator
      └── Produces: Text output from analysis results


DATA CLASSES:

ChartData
  ├── person_name: str
  ├── birth_datetime: str
  ├── location data
  ├── lagna_sign: int (1-12)
  ├── moon_sign: int (1-12)
  ├── planets: Dict[str, PlanetPosition]
  └── divisional_charts: Dict[str, Dict]

PlanetPosition
  ├── planet: str
  ├── sign_number: int
  ├── house_number: int
  ├── degree: float
  ├── nakshatra: str
  ├── retrograde: bool
  ├── exalted: bool
  ├── debilitated: bool
  └── own_house: bool

CompatibilityResult
  ├── person_a/b: str
  ├── charts: ChartData (×2)
  ├── kuta scores (×8)
  ├── total_guna_score: int
  ├── overall_compatibility_percentage: float
  └── key_insights: List[str]
```

---

## KNOWLEDGE BASE INTEGRATION

```
Parashari (Main)
    ├── 12 Zodiac Signs
    ├── 9 Planets
    ├── 12 Houses
    ├── Exaltation/Debilitation
    └── Aspect rules

Nadi Jyotish
    ├── 27 Nakshatras
    ├── Yoni classifications (14)
    ├── Gana classifications (3)
    ├── Nadi types (3: Aadi, Madhya, Antya)
    └── Spouse name derivation

Jaimini
    ├── Graha aspects
    ├── Karakas
    └── Rashi methodology

VP Goel Divisional Charts
    ├── D1-D12 main divisions
    ├── D16, D20, D24, D27, D30
    ├── D40, D45, D60 advanced
    ├── Parashari vs Cyclical methods
    └── Linking of divisional charts

Jay Yadav Synastry
    ├── 8 Kuta Milan factors
    ├── 36-point scale
    ├── Mangal Dosha assessment
    ├── Marriage type determination
    └── Separation yoga indicators
```

---

**System is fully integrated and ready for deployment.**
